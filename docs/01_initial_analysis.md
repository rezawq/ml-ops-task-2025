# Предварительный анализ задачи определения мошеннических финансовых операций

## Цель

1. Проектирование системы выявления мошеннических операций для компании, предоставляющей банковские услуги.
2. Сбор требований к системе
3. Определение состава работ

## Требования

### Бизнес-требования

1. Бюджет - 10 млн. рублей.
2. Срок - 3 месяца на MVP.
3. Число ложно-отрицательных срабатываний не должно превышать 2%. При текущем объеме транзакций это означает, что общий
   ущерб клиентов за месяц не должен превышать 500 тыс. руб.
4. Число ложно-положительных срабатываний не должно превышать 5%, для того чтобы не начинался отток клиентов из компании.

### Функциональные требования

1. Система должна получать на вход информацию о транзакции. Формат передачи данных - csv файл, каждая строка
   соответствует одной транзакции.
2. Система должна определять что транзакция мошенническая или нет.

### Нефункциональные требования

1. Производительность системы должна быть достаточной, для того, чтобы обрабатывать пиковые значения 400 транзакций в
   секунду при среднем числе 50 транзакций в секунду.
2. Собственные сервера заказчик под разрабатываемый модель не выделяет.
3. Информация о транзакциях является конфиденциальной, ее
   утечка недопустима.

## Рассматриваемые вопросы

### Q1. Выбор ML-метрики для оптимизации

Поскольку нужно минимизировать одновременно и ложно-отрицательных срабатывания и ложно-положительные срабатываний, то в
качестве меры будем использовать F-меру.
На начальном этапе будем считать, что важность ложно-отрицательных срабатывания и ложно-положительные срабатываний
одинакова, значит будем использовать F1 -меру

### Анализ особенностей проекта

С использованием Machine learning canvas

| Тема               | Вопросы                                                                                                                                            | Ответ                                                                                                                                          |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| PREDICTION TASK    | Type of task? Entity on which predictions are made? Possible outcomes? Wait time before observation?                                               | Бинарная классификация на данных о транзакции                                                                                                  |
| DECISIONS          | How are predictions turned into proposed value for the end-user? Mention parameters of the process / application that does that.                   | Описаны выше                                                                                                                                   |
| VALUE PROPOSITION  | Who is the end-user? What are their objectives? How will they benefit from the ML system? Mention workflow/interfaces.                             | Закачик - коммерческая компания, занимающуюся предоставлением банковских услуг населению. Цель - сократить издержки на мошеннические операции. |
| DATA COLLECTION    | Strategy for initial train set & continuous update. Mention collection rate, holdout on production entities, cost/constraints to observe outcomes. | Выясняется                                                                                                                                     |
| DATA SOURCES       | Where can we get (raw) information on entities and observed outcomes? Mention database tables, API methods, websites to scrape, etc.               | CSV-файлы                                                                                                                                      |
| IMPACT SIMULATION  | Can models be deployed? Which test data to assess performance? Cost/gain values for (in)correct decisions? Fairness constraint?                    | Потери в деньгах описаны от неправильной классификации описаны в бизнес-требованиях                                                            |
| MAKING PREDICTIONS | When do we make real-time / batch pred.? Time available for this + featurization + post-processing? Compute target?                                | Обработка в реальном времени до 400 транзакций в секунду                                                                                       |
| BUILDING MODELS    | How many prod models are needed? When would we update? Time available for this (including featurization and analysis)?                             | 1 модель бинарного классификатора, её, вероятно, нужно будет обновлять                                                                         |
| FEATURES           | Input representations available at prediction time, extracted from raw data sources.                                                               | Пока не известны                                                                                                                               |
| MONITORING         | Metrics to quantify value creation and measure the ML system’s impact in production (on end-users and business)?                                   | Требования пока не известны                                                                                                                    |

## Декомпозиция работ

1. Проектирование API
2. Определить схему деплоя и выбор облачного провайдера
3. Решить вопрос с безопасностью данных в облачной инфраструктуре
4. Исследование данных и разработка классификатора
5. Разработка процедуры обновления ML-модели
6. Настройка мониторинга 

### 1. Проектирование API

Спроектировать API. Зафиксировать API контракт с заказчиком.
Выяснить, нужна ли эволюция API.

### 2. Определить схему деплоя

Определить схему деплоя. Сколько потребуется серверов. Выбор облачного провайдера с учетом задачи 3.
Срок - 3 дня

### 3. Решить вопрос с безопасностью данных в облачной инфраструктуре

Проанализировать способы защиты данных в облачной инфрастуктуре. Подходят ли эти способы заказчику?

### 4. Исследование данных и разработка классификатора

Получить примеры тестовых данных от заказчика.
Разработать минимально работоспособный классификатор.


### 5. Разработка процедуры обновления ML-модели

Настройка pipeline

### 6. Настройка мониторинга 

Настройка мониторинга

